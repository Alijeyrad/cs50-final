{% extends 'panel/layout2.html' %}
{% load static %}


{% block title %}
  Edit {{user.username}}
{% endblock title %}
  

{% block styles %}
  <style>
    @media (max-width: 420px) {
      #formNav {margin-top: 5px}
    }
  </style>
{% endblock styles %}
  

{% block body %}
<!-- Page Container -->
  <div class="w3-row-padding">
    {% if messages %}
      <!-- Alert Box -->
      <div class="w3-container w3-margin w3-display-container w3-pale-red w3-border w3-theme-border w3-margin-bottom">
        <span onclick="this.parentElement.style.display='none'" class="w3-button w3-display-topright">
          <i class="fa fa-remove"></i>
        </span>
        <p>
          {% for message in messages %}
            {{ message }}
          {% endfor %}
        </p>
      </div>
    {% endif %}

    <!-- Header -->
    <header class="w3-container" style="padding-top:22px">
      <h5><b><i class="fa fa-cog"></i> Settings</b></h5>
    </header>

    <!-- The Grid -->
      <div class="">
        <div class=" w3-margin w3-small" style="overflow-y:scroll">
          <a onclick="formPages(this, 'general')" id="formNav" class="w3-button w3-hover-black w3-black generalButton">General</a>
          <a onclick="formPages(this, 'picture')" id="formNav" class="w3-button w3-hover-black w3-gray">Profile Picture</a>
          <a onclick="formPages(this, 'password')" id="formNav" class="w3-button w3-hover-black w3-gray">Password</a>
          {% if user.is_doctor %}
            <a onclick="formPages(this, 'doctor')" id="formNav" class="w3-button w3-hover-black w3-gray">Specialty</a>
          {% endif %}
        </div>
      </div>
      <!-- Forms -->

      <!-- General Form -->
      <form id="general" class="forms w3-padding w3-animate-opacity" action="{% url 'panel:settings' %}" method="post">
        {% csrf_token %}
        <p>      
          <label><strong>First Name</strong></label>
          <input class="w3-input w3-border" name="first_name" type="text" value="{{user.first_name}}" required />
        </p>
        <p>      
          <label><strong>Last Name</strong></label>
          <input class="w3-input w3-border" name="last_name" type="text" value="{{user.last_name}}" required />
        </p>
        <p>      
          <label><strong>Sex</strong></label>
          <select class="w3-select w3-border" name="sex">
            <option value="" disabled selected>Choose your option</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Intersex">Intersex</option>
          </select>
        </p>
        <hr>
        <p>
          <label for="birthday"><strong>Birthday</strong></label>
          <input type="date" id="birthday" name="birth_date" value="{{user.birth_date|date:'Y-m-d'}}">
        </p>
        <hr>
        <p>      
          <label><strong>Username</strong></label>
          <input class="w3-input w3-border" name="username" type="text" value="{{user.username}}" required />
        </p>
        <p>      
          <label><strong>Email</strong></label>
          <input class="w3-input w3-border" name="email" type="text" value="{{user.email}}" disabled />
        </p>
        <hr>
        <p>      
          <label><strong>Country</strong></label>
          <input class="w3-input w3-border" name="country" type="text" value="{{user.country}}" />
        </p>
        <p>      
          <label><strong>City</strong></label>
          <input class="w3-input w3-border" name="city" type="text" value="{{user.city}}" />
        </p>
        <hr>
        <p>      
          <label><strong>About</strong></label>
          <textarea class="w3-input w3-border" name="about" type="text" placeholder="Tell Your Doctors A Little About Yourself">{{user.about}}</textarea>
        </p>
        <hr>
        <h5>Enter Password To Confirm Changes</h5>
        <p>      
          <label><strong>Password</strong></label>
          <input class="w3-input w3-border" name="password" type="password" required />
        </p>
        <p>      
          <label class="w3-text-theme "><strong>Confirm Password</strong></label>
          <input class="w3-input w3-border" name="confirmation" type="password" required />
        </p>
          
        <p>
          <button class="w3-btn w3-black w3-margin-bottom" type="submit">Done</button>
        </p>
      </form>

      <!-- Password Form -->
      <form id="password" class="forms w3-padding w3-animate-opacity" action="{% url 'panel:change_password' %}" method="post">
        {% csrf_token %}
        <h5>Change Your Password Here</h5>
        <p>      
          <label><strong>New Password</strong></label>
          <input class="w3-input w3-border" name="new_password" type="password" required />
        </p>
        <p>      
          <label><strong>Confirm New Password</strong></label>
          <input class="w3-input w3-border" name="new_password_confirm" type="password" required />
        </p>
        <hr>
        <h5>Enter Old Password To Confirm Changes</h5>
        <p>      
          <label><strong>Password</strong></label>
          <input class="w3-input w3-border" name="password" type="password" required />
        </p>
        <p>      
          <label><strong>Confirm Password</strong></label>
          <input class="w3-input w3-border" name="confirmation" type="password" required />
        </p>

        <p>
          <button class="w3-btn w3-black w3-margin-bottom" type="submit">Done</button>
        </p>
      </form>

      <!-- picture Form -->
      <form id="picture" class="forms w3-padding w3-animate-opacity" action="{% url 'panel:change_picture' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h5>Change Your Profile Picture Here</h5>
        <p>      
          <label><b>Profile Picture</b></label>
          <input class="w3-input w3-border w3-white w3-button" name="profile_pic" type="file" id="imgInp" accept="image/*" required />
          <img id="preview" src="#" alt="preview" style="display:none;height:106px;width:106px" class="w3-round w3-margin" />
        </p>
        <hr>
        <h5>Enter Password To Confirm Changes</h5>
        <p>      
          <label><strong>Password</strong></label>
          <input class="w3-input w3-border" name="password" type="password" required />
        </p>
        <p>      
          <label><strong>Confirm Password</strong></label>
          <input class="w3-input w3-border" name="confirmation" type="password" required />
        </p>

        <p>
          <button class="w3-btn w3-black w3-margin-bottom" type="submit">Done</button>
        </p>
      </form>

      
      {% if user.is_doctor %}
        <!-- Doctor Form -->
        <form id="doctor" class="forms w3-padding w3-animate-opacity" action="{% url 'panel:specialty' %}" method="post">
          {% csrf_token %}
          <p>      
            <label><strong>Specialty</strong></label>
            <select class="w3-select w3-border" name="specialty">
              <option value="" disabled selected>Choose your option</option>
              <option value="CLI">Clinical Psychologist</option>
              <option value="COU">Counseling Psychologist</option>
              <option value="PST">Psychiatrist</option>
              <option value="MFT">Marriage And Family Therapist</option>
              <option value="SW">Social Worker</option>
              <option value="PMT">Psychometrist</option>
              <option value="OTR">Other</option>
            </select>
          </p>
          <hr>
          <h5>Enter Password To Confirm Changes</h5>
          <p>      
            <label><strong>Password</strong></label>
            <input class="w3-input w3-border" name="password" type="password" required />
          </p>
          <p>      
            <label><strong>Confirm Password</strong></label>
            <input class="w3-input w3-border" name="confirmation" type="password" required />
          </p>
  
          <p>
            <button class="w3-btn w3-black w3-margin-bottom" type="submit">Done</button>
          </p>
        </form>
      {% endif %}
        
                
              
        
      <!-- End Middle Column -->


    </div>
  </div>
{% endblock body %}


{% block scripts %}
  <script type="text/javascript" src="{% static 'panel/formPages.js' %}"></script>
  <script>
    document.getElementById('settings').classList.add('w3-pale-blue')
  </script>
{% endblock scripts %}
  